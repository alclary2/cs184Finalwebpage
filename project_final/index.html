<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>CS 184 Final Project Report</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

<h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2022</h1>
<h1 align="middle">Final Project Report</h1>
<h2 align="middle">Title: SilkySmooth Simulation</h2>

<h2 align="middle">Team Members: Anna Clary, Ava Patel, Lucy Lou, Iman Kahssay</h2>

<h2 align="middle">Abstract</h2>

<p>For our final project, we chose the project idea of ‚ÄúCloth Rendering‚Äù (with a difficulty level of 2.0), where we rendered cloth materials using the shader program we learned in project 4. The main goal of our project is to create a local shading model (which is based on perceptual observation, not physics)  that focuses specifically and is more fit for cloth materials; making them look more realistic (and detailed) to the human eye. We implemented two new shaders to the Project 4 rendering program: cloth and anisotropic shaders. Both shaders work as modified microfacet models with three main components: normal distribution, visibility, and diffusion. We used the same structure as the Blinn Phone model, but mostly focused on the diffusion lighting and specular lighting of the object. We also implemented a color sheen to the specular component of the cloth and anisotropic lighting to make the cloth look more sleek and realistic to the human eye.</p>



<h2 align="middle">Technical Approach</h2>

<p>As outlined in our abstract, in order to render more realistic textiles we chose to do so through the implementation of shaders. The beginning state of our project 4 code did a really good job of producing materials with a plastic sheen. This was due to the intensity and location of the specular component which produced a very shiny result akin to plastic coated materials. In order to produce fabrics more aligned with the visual lighting found when rendering cloth materials, like cotton or velvet, it was clear that the specular components would have to be adjusted to make it appear that more light was absorbed. Along with wanting to render cloth materials we also wanted to render textiles like satin and silk that while very shiny in nature, interact with light differently than what could be rendered using project 4 code. To render these types of textiles we landed on using an anisotropic lighting model. Which would create ring shaped specular components in the hopes that it would produce an effect similar to how light would behave with silk.</p>

<p>These two models: cloth and anisotropic were implemented in two separate shader frag files and utilized code from Bump.frag up until the Blinn-Phong Shading model as a starting point. By using the code from Bump the texture of the textiles was able to be rendered more realistically through lighting interactions, allowing us to overlay texture files. Both models are based on a modified microfacet model that utilizes three main parts: distribution, visibility, and diffuse, that differ based on the chosen model.</p>

<p>Below are some new parameters shared between the two models:</p>
<dl>
    <dt><strong>Roughness</strong></dt>
    <dd>- The user input roughness should be a value between 0 and 1.0 and is squared to create the parameter ùú∂ (alpha) seen in the equations in the following sections</dd>
    <dd>The larger the roughness parameter the more the specular component is diffused out as seen below with the blue spheres. This is due to the parameter‚Äôs role in varying the microfacet normals, the larger the value the more the normals are varied creating a rougher looking surface</dd>
    <dt><strong>Sheen Color</strong></dt>
    <dd>- In order to be able to render duochromatic textiles as well as just produce more realistic results we implemented a sheen color which is essentially the color of the specular components</dd>
    <dd>- Within our code the sheen color is implemented as a vec3 RGB value, which can be set manually, or to the user imputed color depending on the users‚Äô preference</dd>
    <dd>- A few of our often used settings include: setting the sheen color to the luminance of the diffuse color (which is determined via user input), the square root of the diffuse color, the user input color with the diffuse color set manually, or simply 0.4 for all values</dd>
    <dt><strong>Diffuse Color</strong></dt>
    <dd>- Our diffuse color is simply the base color of our fabric</dd>
    <dd>- Later on in the anisotropic model section there is a figure showing the diffuse, and specular components where it is clear how playing around with the base and sheen color can create a really beautifully colored fabric</dd>
</dl>

<h3>Sphere‚Äôs Rendered Using our Anisotropic Model Varying Only Roughness as a Parameter:</h3>

<img src="images/roughnessscale.png" align="middle" width="1000"/>

<p>Anisotropic Model:</p>
<p>The anisotropic model introduces one more parameter than the cloth model.</p>
<dl>
    <dt><strong>Anisotropy</strong></dt>
    <dd>- This is a manual user inputed float between -1.0 and 1.0</dd>
    <dd>- negative values produce specular components that are vertical aka bi-tangental to the surface normals, these types of values were not used in any of our renderings as the result of the vertical specular components did not create a realistic looking model for our purposes</dd>
    <dd>- As you can see below, increasing the anisotropic variable results in more defined ring-like highlights</dd>
</dl>

<h3>Sphere‚Äôs Rendered Using our Anisotropic Model Varying Only Anisotropy as a Parameter:</h3>

<img src="images/anisotropyscale.png" align="middle" width="1000"/>

<p>Similarly to our Cloth model our Anisotropic lighting model hinges on three main aspects, our distribution function, visibility component and diffuse component. All of which we utilized our source material to properly define and code.</p>

<p>Distribution</p>
<img src="images/distributioneq.png"/>

<p>This was our chosen distribution function, with h being the half angel and ùú∂ being our roughness parameter as defined before our cloth shader explanation. One of the key new factors in this distribution are the alpha-t and alpha-b variables. We calculated these variables according to the equations below:</p>
<img src="images/anisotropyeq.png"/>

<p>In our documentation there were a few options in terms of how one could calculate the alpha-t and alpha-b values. Ultimately we chose this implementation for two key reasons: simplicity and results. Using the above definitions we were able to render very nice distinct anisotropic specular components without having to complete a plethora of operations. As our code is being done in a shader file it is vital to make sure it is as simplistic as possible in order to prevent performance issues.</p>

<p>Visibility</p>
<img src="images/visibilityeq.png"/>

<p>This is our visibility parameter as outlined in our documentation. With the lambda-v and lambda-t defined as:</p>
<img src="images/visibilityeq2.png"/>

<p>The visibility, distribution and sheen color are multiplied together to create our specular component and then added to our diffuse, which utilizes the same code as our diffuse component in the cloth shader. Below is a visual of our diffuse + specular component that produces our final result. As you can see the sheen color plays a really interesting role in rendering the realistic looking fuschia silk.</p>
<img src="images/anisoadd.png" align="middle" width="1000"/>

<h2 align="middle">Results</h2>

<div align="middle">
    <table style="width=100%">
    <tr>
        <td>
            <img src="images/before_close_up.png" align="middle" width="400px" />
            <figcaption align="middle">Code from Project 4. Very plastic looking</figcaption>
        </td>
        <td>
            <img src="images/wool_knit_closeup.png" align="middle" width="400px" />
            <figcaption align="middle">Close up of wool-knit</figcaption>
        </td>
        <td>
            <img src="images/silk_close_up.png" align="middle" width="400px" />
            <figcaption align="middle">Close up of silk cloth</figcaption>
        </td>
    </tr>
    </table>
</div>

<h2 align="middle">Gallery</h2>

<div align="middle">
    <table style="width=100%">
    <tr>
        <td>
            <img src="images/clothd&s.png" align="middle" width="400px" />
        </td>
        <td>
            <img src="images/image21.png" align="middle" width="400px" />
        </td>
        <td>
            <img src="images/image22.png" align="middle" width="400px" />
        </td>
    </tr>
    <tr>
        <td>
            <img src="images/image23.png" align="middle" width="400px" />
        </td>
        <td>
            <img src="images/image24.png" align="middle" width="400px" />
        </td>
        <td>
            <img src="images/silk_dress.png" align="middle" width="400px" />
        </td>
    </tr>
    </table>
</div>

<h2 align="middle">References</h2>

<a href="https://google.github.io/filament/Filament.html#materialsystem/clothmodel ">https://google.github.io/filament/Filament.html#materialsystem/clothmodel</a>
<a href="https://google.github.io/filament/Filament.html#materialsystem/anisotropicmodel ">https://google.github.io/filament/Filament.html#materialsystem/anisotropicmodel</a>

<h2 align="middle">Video:</h2>
<a href="placeholder"> Final Video </a>

</body>
</html>